// driver classes must have main method
import javax.swing.JOptionPane;
import javax.swing.ImageIcon;
import java.util.Random;

public class ATMachine {

	public static void main(String[] args) {
//	images 
		ImageIcon bank = new ImageIcon("bank.png");
		ImageIcon success = new ImageIcon("success.png");
		
		
//	start menu
		//generate random number
		Random random = new Random();
		long p = random.nextInt(10000000);
		String s = String.valueOf(p);
		
		//intro screen
		JOptionPane.showMessageDialog(null, "Welcome to Tedane Bank of New York First Union \n\n Click 'Okay' to create an account!", "Bank of Tedane First Union",JOptionPane.INFORMATION_MESSAGE, bank);
		JOptionPane.showMessageDialog(null, "Account: " + s +" has been created! \n", "Bank of Tedane First Union",JOptionPane.INFORMATION_MESSAGE, success);
		
		
//	main menu
		
		double bal = Double.parseDouble(JOptionPane.showInputDialog("Enter starting balance"));
		boolean savingsOpt = Boolean.parseBoolean(JOptionPane.showInputDialog("Would You Like to make this a savings account?"));
		
		BankAccount userAcct = new BankAccount (s, bal, savingsOpt);
		
		char menuchoice = showMenu();
		
		while(menuchoice != 'q') {
			
			//handle deposit option
			if(menuchoice == 'd') {
				double deposit = Double.parseDouble(JOptionPane.showInputDialog("Enter deposit amount"));
				userAcct.deposit(deposit);
				JOptionPane.showMessageDialog(null, "Deposit Successful!\n" + userAcct, "Bank of Tedane First Union",JOptionPane.INFORMATION_MESSAGE, success);
			}
			//handle withdraw option
			else if (menuchoice == 'w') {
				double withdraw = Double.parseDouble(JOptionPane.showInputDialog("Enter amount to withdraw"));
				if(userAcct.withdraw(withdraw) == true) {
					JOptionPane.showMessageDialog(null, "Withdrawal Success! \n" + userAcct);
				}
				else {
					JOptionPane.showMessageDialog(null, "Insufficient funds \n" + userAcct);
				}
			}
			//handle check balance option
			else if(menuchoice == 'c') {
				JOptionPane.showMessageDialog(null, userAcct);
			}
			else {
				JOptionPane.showMessageDialog(null, "Invalid Menu Option");
			}
			
			menuchoice = showMenu();
		}//ends while !q loop
		
		
		
		

	}//end main
	public static char showMenu() {
		String menumsg = "Welcome to the ATMachine\n\n";
		menumsg += "(d)eposit\n";
		menumsg += "(w)ithdraw\n";
		menumsg += "(c)heck-balance\n";
		menumsg += "(q)uit\n";
		
		return JOptionPane.showInputDialog( menumsg ).toLowerCase().charAt(0);
	}//end showMenu

}
